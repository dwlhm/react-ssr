/**
 * router-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).RouterCore={})}(this,(function(t){"use strict";function e(){return e=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},e.apply(this,arguments)}var a;!function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"}(a||(a={}));var n="beforeunload",r="popstate";function o(t){void 0===t&&(t={});var o=t.window,s=void 0===o?document.defaultView:o,i=s.history;function f(){var t=s.location,e=t.pathname,a=t.search,n=t.hash,r=i.state||{};return[r.idx,{pathname:e,search:a,hash:n,state:r.usr||null,key:r.key||"default"}]}var p=null;s.addEventListener(r,(function(){if(p)w.call(p),p=null;else{var t=a.Pop,e=f(),n=e[0],r=e[1];if(w.length){if(null!=n){var o=g-n;o&&(p={action:t,location:r,retry:function(){A(-1*o)}},A(o))}}else x(t)}}));var v=a.Pop,m=f(),g=m[0],y=m[1],b=l(),w=l();function P(t){return"string"==typeof t?t:h(t)}function _(t,a){return void 0===a&&(a=null),e({pathname:y.pathname,hash:"",search:""},"string"==typeof t?d(t):t,{state:a,key:u()})}function L(t,e){return[{usr:t.state,key:t.key,idx:e},P(t)]}function M(t,e,a){return!w.length||(w.call({action:t,location:e,retry:a}),!1)}function x(t){v=t;var e=f();g=e[0],y=e[1],b.call({action:v,location:y})}function A(t){i.go(t)}null==g&&(g=0,i.replaceState(e({},i.state,{idx:g}),""));var S={get action(){return v},get location(){return y},createHref:P,push:function t(e,n){var r=a.Push,o=_(e,n);if(M(r,o,(function(){t(e,n)}))){var c=L(o,g+1),l=c[0],u=c[1];try{i.pushState(l,"",u)}catch(t){s.location.assign(u)}x(r)}},replace:function t(e,n){var r=a.Replace,o=_(e,n);if(M(r,o,(function(){t(e,n)}))){var s=L(o,g),c=s[0],l=s[1];i.replaceState(c,"",l),x(r)}},go:A,back:function(){A(-1)},forward:function(){A(1)},listen:function(t){return b.push(t)},block:function(t){var e=w.push(t);return 1===w.length&&s.addEventListener(n,c),function(){e(),w.length||s.removeEventListener(n,c)}}};return S}function s(t){void 0===t&&(t={});var n=t,r=n.initialEntries,o=void 0===r?["/"]:r,s=n.initialIndex,c=o.map((function(t){return e({pathname:"/",search:"",hash:"",state:null,key:u()},"string"==typeof t?d(t):t)})),f=i(null==s?c.length-1:s,0,c.length-1),p=a.Pop,v=c[f],m=l(),g=l();function y(t,a){return void 0===a&&(a=null),e({pathname:v.pathname,search:"",hash:""},"string"==typeof t?d(t):t,{state:a,key:u()})}function b(t,e,a){return!g.length||(g.call({action:t,location:e,retry:a}),!1)}function w(t,e){p=t,v=e,m.call({action:p,location:v})}function P(t){var e=i(f+t,0,c.length-1),n=a.Pop,r=c[e];b(n,r,(function(){P(t)}))&&(f=e,w(n,r))}var _={get index(){return f},get action(){return p},get location(){return v},createHref:function(t){return"string"==typeof t?t:h(t)},push:function t(e,n){var r=a.Push,o=y(e,n);b(r,o,(function(){t(e,n)}))&&(f+=1,c.splice(f,c.length,o),w(r,o))},replace:function t(e,n){var r=a.Replace,o=y(e,n);b(r,o,(function(){t(e,n)}))&&(c[f]=o,w(r,o))},go:P,back:function(){P(-1)},forward:function(){P(1)},listen:function(t){return m.push(t)},block:function(t){return g.push(t)}};return _}function i(t,e,a){return Math.min(Math.max(t,e),a)}function c(t){t.preventDefault(),t.returnValue=""}function l(){var t=[];return{get length(){return t.length},push:function(e){return t.push(e),function(){t=t.filter((function(t){return t!==e}))}},call:function(e){t.forEach((function(t){return t&&t(e)}))}}}function u(){return Math.random().toString(36).substr(2,8)}function h(t){var e=t.pathname,a=void 0===e?"/":e,n=t.search,r=void 0===n?"":n,o=t.hash,s=void 0===o?"":o;return r&&"?"!==r&&(a+="?"===r.charAt(0)?r:"?"+r),s&&"#"!==s&&(a+="#"===s.charAt(0)?s:"#"+s),a}function d(t){var e={};if(t){var a=t.indexOf("#");a>=0&&(e.hash=t.substr(a),t=t.substr(0,a));var n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function f(t,e){if(!t)throw new Error("Invariant failed")}function p(t){return t[t.length-1]}function v(t,e){return"function"==typeof t?t(e):t}function m(t,e){return e.reduce(((e,a)=>(e[a]=t[a],e)),{})}function g(t){return y(t.filter(Boolean).join("/"))}function y(t){return t.replace(/\/{2,}/g,"/")}function b(t){return"/"===t?t:t.replace(/^\/{1,}/,"")}function w(t){return"/"===t?t:t.replace(/\/{1,}$/,"")}function P(t){return w(b(t))}function _(t,e,a){e=e.replace(new RegExp(`^${t}`),"/"),a=a.replace(new RegExp(`^${t}`),"/");let n=L(e);const r=L(a);r.forEach(((t,e)=>{if("/"===t.value)e?e===r.length-1&&n.push(t):n=[t];else if(".."===t.value){var a;n.length>1&&"/"===(null==(a=p(n))?void 0:a.value)&&n.pop(),n.pop()}else{if("."===t.value)return;n.push(t)}}));return y(g([t,...n.map((t=>t.value))]))}function L(t){if(!t)return[];const e=[];if("/"===(t=y(t)).slice(0,1)&&(t=t.substring(1),e.push({type:"pathname",value:"/"})),!t)return e;const a=t.split("/").filter(Boolean);return e.push(...a.map((t=>t.startsWith("*")?{type:"wildcard",value:t}:"$"===t.charAt(0)?{type:"param",value:t}:{type:"pathname",value:t}))),"/"===t.slice(-1)&&(t=t.substring(1),e.push({type:"pathname",value:"/"})),e}function M(t,e,a){return g(L(t).map((t=>"*"!==t.value||a?"param"===t.type?e[t.value.substring(1)]??"":t.value:"")))}function x(t,e,a){const n=A(t,e,a);if(!a.to||n)return n??{}}function A(t,e,a){if(!e.startsWith(t))return;const n=L(e="/"!=t?e.substring(t.length):e),r=L(`${a.to??"*"}`),o={};return(()=>{for(let t=0;t<Math.max(n.length,r.length);t++){const e=n[t],s=r[t],i=t===r.length-1,c=t===n.length-1;if(s){if("wildcard"===s.type)return!(null==e||!e.value)&&(o["*"]=g(n.slice(t).map((t=>t.value))),!0);if("pathname"===s.type){if("/"===s.value&&(null==e||!e.value))return!0;if(e)if(a.caseSensitive){if(s.value!==e.value)return!1}else if(s.value.toLowerCase()!==e.value.toLowerCase())return!1}if(!e)return!1;if("param"===s.type){if("/"===(null==e?void 0:e.value))return!1;"$"!==e.value.charAt(0)&&(o[s.value.substring(1)]=e.value)}}if(i&&!c)return!!a.fuzzy}return!0})()?o:void 0}function S(t,e){var a,n,r,o="";for(a in t)if(void 0!==(r=t[a]))if(Array.isArray(r))for(n=0;n<r.length;n++)o&&(o+="&"),o+=encodeURIComponent(a)+"="+encodeURIComponent(r[n]);else o&&(o+="&"),o+=encodeURIComponent(a)+"="+encodeURIComponent(r);return(e||"")+o}function R(t){if(!t)return"";var e=decodeURIComponent(t);return"false"!==e&&("true"===e||("0"===e.charAt(0)?e:0*+e==0?+e:e))}function I(t){for(var e,a,n={},r=t.split("&");e=r.shift();)void 0!==n[a=(e=e.split("=")).shift()]?n[a]=[].concat(n[a],R(e.shift())):n[a]=R(e.shift());return n}var E=void 0,O=null,j=0,C=null;function D(){if(C){for(let t=0;t<C.length;t++)C[t].get();C=null}}function k(t){C=[];let e=t();return D(),e}var F=Symbol("store-raw"),T=Symbol("track"),$=Symbol("store-proxy"),N=Symbol("store-node");function U(t){let e=t[$];if(!e&&(Object.defineProperty(t,$,{value:e=new Proxy(t,J)}),!Array.isArray(t))){const a=Object.keys(t),n=Object.getOwnPropertyDescriptors(t);for(let r=0,o=a.length;r<o;r++){const o=a[r];if(n[o].get){const a=n[o].get.bind(e);Object.defineProperty(t,o,{enumerable:n[o].enumerable,get:a})}}}return e}function B(t){let e;return null!=t&&"object"==typeof t&&(t[$]||!(e=Object.getPrototypeOf(t))||e===Object.prototype||Array.isArray(t))}function H(t,e=new Set){let a,n,r,o;if(a=null!=t&&t[F])return a;if(!B(t)||e.has(t))return t;if(Array.isArray(t)){Object.isFrozen(t)?t=t.slice(0):e.add(t);for(let a=0,o=t.length;a<o;a++)r=t[a],(n=H(r,e))!==r&&(t[a]=n)}else{Object.isFrozen(t)?t=Object.assign({},t):e.add(t);const a=Object.keys(t),s=Object.getOwnPropertyDescriptors(t);for(let i=0,c=a.length;i<c;i++)o=a[i],s[o].get||(r=t[o],(n=H(r,e))!==r&&(t[o]=n))}return t}function G(t){let e=t[N];return e||Object.defineProperty(t,N,{value:e={}}),e}function z(t,e,a){return t[e]||(t[e]=V(a))}function K(t){if(E){const e=G(t);(e._||(e._=V())).get()}}function V(t){const e=new class{value;fn;observers=null;sources=null;state;effect;cleanups=null;alwaysUpdate=!1;constructor(t,e){0!=e?(this.fn=t,this.value=void 0,this.state=2,console.error("Memos and effects must be wrapped in a createRoot"),this.effect=2==e,this.effect&&this.update()):(this.fn=void 0,this.value=t,this.state=0,this.effect=!1)}get(){return E&&(!O&&E.sources&&E.sources[j]==this?j++:O?O.push(this):O=[this]),this.fn&&this.updateIfNecessary(),this.value}set(t){const e=!C,a="function"==typeof t?t(this.value):t;if((this.value!==a||this.alwaysUpdate)&&this.observers)for(let t=0;t<this.observers.length;t++)this.observers[t].stale(2);return this.value=a,e&&D(),a}stale(t){if(this.state<t&&(0===this.state&&this.effect&&(C?C.push(this):C=[this]),this.state=t,this.observers))for(let t=0;t<this.observers.length;t++)this.observers[t].stale(1)}update(){const t=this.value,e=E,a=O,n=j;E=this,O=null,j=0;try{if(this.cleanups&&(this.cleanups.forEach((t=>t())),this.cleanups=null),this.value=this.fn(),O){if(this.removeParentObservers(j),this.sources&&j>0){this.sources.length=j+O.length;for(let t=0;t<O.length;t++)this.sources[j+t]=O[t]}else this.sources=O;for(let t=j;t<this.sources.length;t++){const e=this.sources[t];e.observers?e.observers.push(this):e.observers=[this]}}else this.sources&&j<this.sources.length&&(this.removeParentObservers(j),this.sources.length=j)}finally{O=a,E=e,j=n}if((t!==this.value||this.alwaysUpdate)&&this.observers)for(let t=0;t<this.observers.length;t++)this.observers[t].state=2;this.state=0}updateIfNecessary(){if(1===this.state)for(const t of this.sources)if(t.updateIfNecessary(),2===this.state)break;2===this.state&&this.update(),this.state=0}removeParentObservers(t){if(this.sources)for(let e=t;e<this.sources.length;e++){const t=this.sources[e],a=t.observers.findIndex((t=>t===this));t.observers[a]=t.observers[t.observers.length-1],t.observers.pop()}}destroy(){this.cleanups&&(this.cleanups.forEach((t=>t())),this.cleanups=null),this.removeParentObservers(0)}}(t,0);return e.alwaysUpdate=!0,e}var W=!1,J={get(t,e,a){if(e===F)return t;if(e===$)return a;if(e===T)return K(t),a;const n=G(t),r=n.hasOwnProperty(e);let o=r?n[e].get():t[e];if(e===N||"__proto__"===e)return o;if(!r){const a=Object.getOwnPropertyDescriptor(t,e);!E||"function"==typeof o&&!t.hasOwnProperty(e)||a&&a.get||(o=z(n,e,o).get())}return B(o)?U(o):o},has(t,e){return e===F||e===$||e===T||e===N||"__proto__"===e||(this.get(t,e,t),e in t)},set:(t,e,a)=>(W&&q(t,e,H(a)),!0),deleteProperty:(t,e)=>(W&&q(t,e,void 0,!0),!0),ownKeys:function(t){return K(t),Reflect.ownKeys(t)},getOwnPropertyDescriptor:function(t,e){const a=Reflect.getOwnPropertyDescriptor(t,e);return a&&!a.get&&a.configurable&&e!==$&&e!==N?(delete a.value,delete a.writable,a.get=()=>t[$][e],a):a}};function q(t,e,a,n=!1){if(!n&&t[e]===a)return;const r=t[e],o=t.length;n?delete t[e]:t[e]=a;const s=G(t);let i;(i=z(s,e,r))&&i.set((()=>a)),Array.isArray(t)&&t.length!==o&&(i=z(s,"length",o))&&i.set(t.length),(i=s._)&&i.set()}function X(t){const e=U(H(t));return[e,t=>{k((()=>{try{W=!0,t(e)}finally{W=!1}}))}]}function Q(t,e,a,n,r){const{id:o,routeId:s,path:i,fullPath:c}=t;let l={routeInfo:void 0,routeId:o,routeRouteId:s,originalIndex:a,routePath:i,fullPath:c,options:e,router:r,childRoutes:void 0,parentRoute:n,get action(){let t=r.store.actions[o]||(r.setStore((e=>{e.actions[o]={submissions:[],submit:async(e,a)=>{if(!l)return;const n=(null==a?void 0:a.invalidate)??!0,[s,i]=X({submittedAt:Date.now(),status:"pending",submission:e,isMulti:!(null==a||!a.multi)});r.setStore((e=>{null!=a&&a.multi||(e.actions[o].submissions=t.submissions.filter((t=>t.isMulti))),e.actions[o].current=s,e.actions[o].latest=s,e.actions[o].submissions.push(s)}));try{const t=await(null==l.options.action?void 0:l.options.action(e));return i((e=>{e.data=t})),n&&(r.invalidateRoute({to:".",fromCurrent:!0}),await r.reload()),i((t=>{t.status="success"})),t}catch(t){console.error(t),i((e=>{e.error=t,e.status="error"}))}}}})),r.store.actions[o]);return t},get loader(){return r.store.loaders[o]||(r.setStore((t=>{t.loaders[o]={pending:[],fetch:async t=>{if(!l)return;const e={loadedAt:Date.now(),loaderContext:t};r.setStore((t=>{t.loaders[o].current=e,t.loaders[o].latest=e,t.loaders[o].pending.push(e)}));try{return await(null==l.options.loader?void 0:l.options.loader(t))}finally{r.setStore((t=>{t.loaders[o].pending=t.loaders[o].pending.filter((t=>t!==e))}))}}}})),r.store.loaders[o])}};return null==r.options.createRoute||r.options.createRoute({router:r,route:l}),l}const Y="__root__",Z=function(t,e,a,n,r){void 0===t&&(t={}),void 0===a&&(a=!0),a&&(t.path=Y),n===Y&&(n="");let o=a?Y:t.path;o&&"/"!==o&&(o=P(o));const s=o||t.id;let i=g([n,s]);o===Y&&(o="/"),i!==Y&&(i=g(["/",i]));const c=i===Y?"/":w(g([r,o]));return{id:i,routeId:s,path:o,fullPath:c,options:t,children:e,addChildren:e=>Z(t,e,!1,n,r),createRoute:t=>Z(t,void 0,!1,i,c),generate:()=>{f(!1)}}};function tt(t,e,a){const n=new Map;return function t(e,a){if(e===a)return e;if(n.has(a))return n.get(a);const r=Array.isArray(e),o=Array.isArray(a),s=et(e),i=et(a),c=r&&o;if(c||s&&i){const r=c?e.length:Object.keys(e).length,o=c?a:Object.keys(a),s=o.length,i=c?[]:{};let l=0;for(let t=0;t<s;t++){const a=c?t:o[t];i[a]===e[a]&&l++}if(r===s&&l===r)return n.set(a,e),e;n.set(a,i);for(let n=0;n<s;n++){const r=c?n:o[n];"function"==typeof o[n]?i[r]=e[r]:i[r]=t(e[r],a[r]),i[r]===e[r]&&l++}return i}if(o){const e=[];n.set(a,e);for(let n=0;n<a.length;n++)e[n]=t(void 0,a[n]);return e}if(i){const e={};n.set(a,e);const r=Object.keys(a);for(let n=0;n<r.length;n++){const o=r[n];e[o]=t(void 0,a[o])}return e}return a}(t,e)}function et(t){if(!at(t))return!1;const e=t.constructor;if(void 0===e)return!0;const a=e.prototype;return!!at(a)&&!!a.hasOwnProperty("isPrototypeOf")}function at(t){return"[object Object]"===Object.prototype.toString.call(t)}const nt=["component","errorComponent","pendingComponent"];function rt(t,e,a){let n,r,o="",s=()=>{};function i(){l((t=>{var e;t.loaderData=tt(t.loaderData,{...null==(e=c.parentMatch)?void 0:e.store.loaderData,...t.routeLoaderData})}))}const[c,l]=X({routeSearch:{},search:{},status:"idle",routeLoaderData:{},loaderData:{},isFetching:!1,invalid:!1,invalidAt:1/0,get isInvalid(){const t=Date.now();return this.invalid||this.invalidAt<t}}),u={...e,...a,store:c,router:t,childMatches:[],__:{setParentMatch:t=>{k((()=>{l((e=>{e.parentMatch=t})),i()}))},abortController:new AbortController,validate:()=>{var e;const a=(null==(e=c.parentMatch)?void 0:e.store.search)??t.store.currentLocation.search;try{const t=c.routeSearch,e="object"==typeof u.options.validateSearch?u.options.validateSearch.parse:u.options.validateSearch;let n=tt(t,(null==e?void 0:e(a))??{});k((()=>{t!==n&&l((t=>t.invalid=!0)),l((t=>{t.routeSearch=n,t.search=tt(a,{...a,...n})}))})),nt.map((async t=>{const e=u.options[t];"function"!=typeof u.__[t]&&(u.__[t]=e)}))}catch(t){console.error(t);const e=new Error("Invalid search params found",{cause:t});return e.code="INVALID_SEARCH_PARAMS",void l((t=>{t.status="error",t.error=e}))}}},cancel:()=>{var t;null==(t=u.__.abortController)||t.abort()},invalidate:()=>{l((t=>t.invalid=!0))},hasLoaders:()=>!(!e.options.loader&&!nt.some((t=>{var a;return null==(a=e.options[t])?void 0:a.preload}))),load:async e=>{const a=Date.now(),n=null!=e&&e.preload?Math.max(null==e?void 0:e.maxAge,null==e?void 0:e.gcMaxAge):0;if(null!=e&&e.preload&&n>0){if(t.store.currentMatches.find((t=>t.matchId===u.matchId)))return;t.store.matchCache[u.matchId]={gc:a+e.gcMaxAge,match:u}}if("success"===c.status&&c.isInvalid||"error"===c.status||"idle"===c.status){const t=null!=e&&e.preload?null==e?void 0:e.maxAge:void 0;await u.fetch({maxAge:t})}},fetch:async e=>{const a=""+Date.now()+Math.random();o=a;const h=async()=>{if(a!==o)return new Promise((()=>{}))};k((()=>{"idle"===c.status&&l((t=>t.status="loading")),l((t=>t.invalid=!1))})),u.__.loadPromise=new Promise((async a=>{l((t=>t.isFetching=!0)),s=a,n=(async()=>{await Promise.all(nt.map((async e=>{var a;const n=u.options[e];null!=(a=u.__[e])&&a.preload&&(u.__[e]=await t.options.loadComponent(n))})))})(),r=Promise.resolve().then((async()=>{try{if(u.options.loader){const e=await t.loadMatchData(u);await h(),a=e,k((()=>{l((t=>{t.routeLoaderData=tt(t.routeLoaderData,a)})),i()}))}return l((a=>{a.error=void 0,a.status="success",a.updatedAt=Date.now(),a.invalidAt=a.updatedAt+((null==e?void 0:e.maxAge)??u.options.loaderMaxAge??t.options.defaultLoaderMaxAge??0)})),c.routeLoaderData}catch(t){throw await h(),l((e=>{e.error=t,e.status="error",e.updatedAt=Date.now()})),t}var a}));const o=async()=>{await h(),l((t=>t.isFetching=!1)),delete u.__.loadPromise,s()};try{await Promise.all([n,r.catch((()=>{}))]),o()}catch{o()}})),await u.__.loadPromise,await h()}};return u.hasLoaders()||l((t=>t.status="success")),u}const ot=it(JSON.parse),st=ct(JSON.stringify);function it(t){return e=>{"?"===e.substring(0,1)&&(e=e.substring(1));let a=I(e);for(let e in a){const n=a[e];if("string"==typeof n)try{a[e]=t(n)}catch(t){}}return a}}function ct(t){return e=>{(e={...e})&&Object.keys(e).forEach((a=>{const n=e[a];if(void 0===n||void 0===n)delete e[a];else if(n&&"object"==typeof n&&null!==n)try{e[a]=t(n)}catch(t){}}));const a=S(e).toString();return a?`?${a}`:""}}var lt;const ut="undefined"==typeof window||!(null!=(lt=window.document)&&lt.createElement);function ht(){return{status:"idle",latestLocation:null,currentLocation:null,currentMatches:[],actions:{},loaders:{},lastUpdated:Date.now(),matchCache:{},get isFetching(){return"loading"===this.status||this.currentMatches.some((t=>t.store.isFetching))},get isPreloading(){return Object.values(this.matchCache).some((t=>t.match.store.isFetching&&!this.currentMatches.find((e=>e.matchId===t.match.matchId))))}}}t.cleanPath=y,t.createBrowserHistory=o,t.createHashHistory=function(t){void 0===t&&(t={});var o=t.window,s=void 0===o?document.defaultView:o,i=s.history;function f(){var t=d(s.location.hash.substr(1)),e=t.pathname,a=void 0===e?"/":e,n=t.search,r=void 0===n?"":n,o=t.hash,c=void 0===o?"":o,l=i.state||{};return[l.idx,{pathname:a,search:r,hash:c,state:l.usr||null,key:l.key||"default"}]}var p=null;function v(){if(p)P.call(p),p=null;else{var t=a.Pop,e=f(),n=e[0],r=e[1];if(P.length){if(null!=n){var o=y-n;o&&(p={action:t,location:r,retry:function(){S(-1*o)}},S(o))}}else A(t)}}s.addEventListener(r,v),s.addEventListener("hashchange",(function(){h(f()[1])!==h(b)&&v()}));var m=a.Pop,g=f(),y=g[0],b=g[1],w=l(),P=l();function _(t){return function(){var t=document.querySelector("base"),e="";if(t&&t.getAttribute("href")){var a=s.location.href,n=a.indexOf("#");e=-1===n?a:a.slice(0,n)}return e}()+"#"+("string"==typeof t?t:h(t))}function L(t,a){return void 0===a&&(a=null),e({pathname:b.pathname,hash:"",search:""},"string"==typeof t?d(t):t,{state:a,key:u()})}function M(t,e){return[{usr:t.state,key:t.key,idx:e},_(t)]}function x(t,e,a){return!P.length||(P.call({action:t,location:e,retry:a}),!1)}function A(t){m=t;var e=f();y=e[0],b=e[1],w.call({action:m,location:b})}function S(t){i.go(t)}null==y&&(y=0,i.replaceState(e({},i.state,{idx:y}),""));var R={get action(){return m},get location(){return b},createHref:_,push:function t(e,n){var r=a.Push,o=L(e,n);if(x(r,o,(function(){t(e,n)}))){var c=M(o,y+1),l=c[0],u=c[1];try{i.pushState(l,"",u)}catch(t){s.location.assign(u)}A(r)}},replace:function t(e,n){var r=a.Replace,o=L(e,n);if(x(r,o,(function(){t(e,n)}))){var s=M(o,y),c=s[0],l=s[1];i.replaceState(c,"",l),A(r)}},go:S,back:function(){S(-1)},forward:function(){S(1)},listen:function(t){return w.push(t)},block:function(t){var e=P.push(t);return 1===P.length&&s.addEventListener(n,c),function(){e(),P.length||s.removeEventListener(n,c)}}};return R},t.createMemoryHistory=s,t.createRoute=Q,t.createRouteConfig=Z,t.createRouteMatch=rt,t.createRouter=function(t){const e={defaultLoaderGcMaxAge:3e5,defaultLoaderMaxAge:0,defaultPreloadMaxAge:2e3,defaultPreloadDelay:50,context:void 0,...t,stringifySearch:(null==t?void 0:t.stringifySearch)??st,parseSearch:(null==t?void 0:t.parseSearch)??ot},[a,n]=X(ht());let r,i=Date.now(),c=()=>{};function l(){b.load()}function u(t,e){const a=b.options.parseSearch(t.search);return{pathname:t.pathname,searchStr:t.search,search:tt(null==e?void 0:e.search,a),hash:t.hash.split("#").reverse()[0]??"",href:`${t.pathname}${t.search}${t.hash}`,state:t.state,key:t.key}}function h(t){return function(t,e){const a=""+Date.now()+Math.random();let n="replace";e||(n="push");u(b.history.location).href!==t.href||t.key||(n="replace");return b.history[n]({pathname:t.pathname,hash:t.hash,search:t.searchStr},{id:a,...t.state}),r=new Promise((t=>{const e=c;c=()=>{e(),t()}}))}(b.buildNext(t),t.replace)}function d(t){var e,n,r,o;void 0===t&&(t={});const s=t.fromCurrent?a.latestLocation.pathname:t.from??a.latestLocation.pathname;let i=_(b.basepath??"/",s,`${t.to??"."}`);const c=b.matchRoutes(a.latestLocation.pathname,{strictParseParams:!0}),l=b.matchRoutes(i),u={...null==(e=p(c))?void 0:e.params};let h=!0===(t.params??!0)?u:v(t.params,u);h&&l.map((t=>t.options.stringifyParams)).filter(Boolean).forEach((t=>{Object.assign({},h,t(h))})),i=M(i,h??{});const d=null!=(n=t.__preSearchFilters)&&n.length?t.__preSearchFilters.reduce(((t,e)=>e(t)),a.latestLocation.search):a.latestLocation.search,f=!0===t.search?d:t.search?v(t.search,d)??{}:null!=(r=t.__preSearchFilters)&&r.length?d:{},m=null!=(o=t.__postSearchFilters)&&o.length?t.__postSearchFilters.reduce(((t,e)=>e(t)),f):f,g=tt(a.latestLocation.search,m),y=b.options.stringifySearch(g);let w=!0===t.hash?a.latestLocation.hash:v(t.hash,a.latestLocation.hash);return w=w?`#${w}`:"",{pathname:i,search:g,searchStr:y,state:a.latestLocation.state,hash:w,href:`${i}${y}${w}`,key:t.key}}const b={types:void 0,history:(null==t?void 0:t.history)||(ut?s():o()),store:a,setStore:n,options:e,basepath:"",routeTree:void 0,routesById:{},reset:()=>{n((t=>Object.assign(t,ht())))},getRoute:t=>b.routesById[t],dehydrate:()=>({store:{...m(a,["latestLocation","currentLocation","status","lastUpdated"]),currentMatches:a.currentMatches.map((t=>({matchId:t.matchId,store:m(t.store,["status","routeLoaderData","isInvalid","invalidAt"])})))},context:b.options.context}),hydrate:t=>{n((e=>{b.options.context=t.context;const a=b.matchRoutes(t.store.latestLocation.pathname,{strictParseParams:!0});a.forEach(((e,a)=>{const n=t.store.currentMatches[a];f(n&&n.matchId===e.matchId),Object.assign(e,n)})),a.forEach((t=>t.__.validate())),Object.assign(e,{...t.store,currentMatches:a})}))},mount:()=>{if(!ut){a.currentMatches.length||b.load();const t=b.history.listen((t=>{b.load(u(t.location,a.latestLocation))}));return window.addEventListener&&(window.addEventListener("visibilitychange",l,!1),window.addEventListener("focus",l,!1)),()=>{t(),window.removeEventListener&&(window.removeEventListener("visibilitychange",l),window.removeEventListener("focus",l))}}return()=>{}},update:t=>{const e=(null==t?void 0:t.history)!==b.history;a.latestLocation&&!e||(null!=t&&t.history&&(b.history=t.history),n((t=>{t.latestLocation=u(b.history.location),t.currentLocation=t.latestLocation}))),Object.assign(b.options,t);const{basepath:r,routeConfig:o}=b.options;return b.basepath=`/${P(r??"")??""}`,o&&(b.routesById={},b.routeTree=function(t){const e=(t,a)=>t.map(((t,n)=>{const r=Q(t,t.options,n,a,b);if(b.routesById[r.routeId])throw new Error;b.routesById[r.routeId]=r;const o=t.children;return r.childRoutes=null!=o&&o.length?e(o,r):void 0,r}));return e([t])[0]}(o)),b},cancelMatches:()=>{[...a.currentMatches,...a.pendingMatches||[]].forEach((t=>{t.cancel()}))},load:async t=>{let e=Date.now();const o=e;let s;i=o,b.cancelMatches(),k((()=>{t&&n((e=>{e.latestLocation=t})),s=b.matchRoutes(a.latestLocation.pathname,{strictParseParams:!0}),console.log("set loading",s),n((t=>{t.status="loading",t.pendingMatches=s,t.pendingLocation=a.latestLocation}))}));try{await b.loadMatches(s)}catch(t){console.log(t),f(!1)}if(i!==o)return r;const l=a.currentMatches,u=[],h=[];l.forEach((t=>{s.find((e=>e.matchId===t.matchId))?h.push(t):u.push(t)}));const d=s.filter((t=>!l.find((e=>e.matchId===t.matchId))));e=Date.now(),u.forEach((t=>{null==t.__.onExit||t.__.onExit({params:t.params,search:t.store.routeSearch}),"error"!==t.store.status||t.store.isFetching||(t.store.status="idle",t.store.error=void 0);const n=Math.max(t.options.loaderGcMaxAge??b.options.defaultLoaderGcMaxAge??0,t.options.loaderMaxAge??b.options.defaultLoaderMaxAge??0);n>0&&(a.matchCache[t.matchId]={gc:n==1/0?Number.MAX_SAFE_INTEGER:e+n,match:t})})),h.forEach((t=>{null==t.options.onTransition||t.options.onTransition({params:t.params,search:t.store.routeSearch})})),d.forEach((t=>{t.__.onExit=null==t.options.onLoaded?void 0:t.options.onLoaded({params:t.params,search:t.store.search}),delete a.matchCache[t.matchId]})),i===o&&(s.forEach((t=>{t.action&&(t.action.current=void 0,t.action.submissions=[])})),n((t=>{console.log("set",s),Object.assign(t,{status:"idle",currentLocation:a.latestLocation,currentMatches:s,pendingLocation:void 0,pendingMatches:void 0})})),c())},cleanMatchCache:()=>{const t=Date.now();n((e=>{Object.keys(e.matchCache).forEach((a=>{const n=e.matchCache[a];"loading"!==n.match.store.status&&(n.gc>0&&n.gc>t||delete e.matchCache[a])}))}))},loadRoute:async function(t){void 0===t&&(t=a.latestLocation);const e=b.buildNext(t),n=b.matchRoutes(e.pathname,{strictParseParams:!0});return await b.loadMatches(n),n},preloadRoute:async function(t,e){void 0===t&&(t=a.latestLocation);const n=b.buildNext(t),r=b.matchRoutes(n.pathname,{strictParseParams:!0});return await b.loadMatches(r,{preload:!0,maxAge:e.maxAge??b.options.defaultPreloadMaxAge??b.options.defaultLoaderMaxAge??0,gcMaxAge:e.gcMaxAge??b.options.defaultPreloadGcMaxAge??b.options.defaultLoaderGcMaxAge??0}),r},matchRoutes:(t,e)=>{b.cleanMatchCache();const n=[];if(!b.routeTree)return n;const r=[...a.currentMatches,...a.pendingMatches??[]],o=async s=>{var i;const c=p(n);let l=(null==c?void 0:c.params)??{};const u=(null==b.options.filterRoutes?void 0:b.options.filterRoutes(s))??s;let h=[];const d=(a,n)=>(n.some((n=>{var r,o;if(!n.routePath&&null!=(r=n.childRoutes)&&r.length)return d([...h,n],n.childRoutes);const s=!!("/"!==n.routePath||null!=(o=n.childRoutes)&&o.length),i=x(b.basepath,t,{to:n.fullPath,fuzzy:s,caseSensitive:n.options.caseSensitive??b.options.caseSensitive});if(i){let t;try{t=(null==n.options.parseParams?void 0:n.options.parseParams(i))??i}catch(t){if(null!=e&&e.strictParseParams)throw t}l={...l,...t}}return i&&(h=[...a,n]),!!h.length})),!!h.length);if(d([],u),!h.length)return;h.forEach((t=>{var e;const o=M(t.routePath,l),s=M(t.routeId,l,!0),i=r.find((t=>t.matchId===s))||(null==(e=a.matchCache[s])?void 0:e.match)||rt(b,t,{parentMatch:c,matchId:s,params:l,pathname:g([b.basepath,o])});n.push(i)}));const f=p(h);null!=(i=f.childRoutes)&&i.length&&o(f.childRoutes)};return o([b.routeTree]),function(t){t.forEach(((e,a)=>{const n=t[a-1];n?e.__.setParentMatch(n):e.__.setParentMatch(void 0)}))}(n),n},loadMatches:async(t,e)=>{t.forEach((async t=>{t.__.validate()})),await Promise.all(t.map((async t=>{try{await(null==t.options.beforeLoad?void 0:t.options.beforeLoad({router:b,match:t}))}catch(a){throw null!=e&&e.preload||null==t.options.onLoadError||t.options.onLoadError(a),a}})));const a=t.map((async t=>{var a;const n=t.store.search;null!=(a=n.__data)&&a.matchId&&n.__data.matchId!==t.matchId||(t.load(e),"success"!==t.store.status&&t.__.loadPromise&&await t.__.loadPromise)}));await Promise.all(a)},loadMatchData:async t=>{if(ut||!b.options.useServerData)return await(null==t.options.loader?void 0:t.options.loader({params:t.params,search:t.store.routeSearch,signal:t.__.abortController.signal}))||{};{const e=b.buildNext({to:".",search:e=>({...e??{},__data:{matchId:t.matchId}})}),a=await fetch(e.href,{method:"GET"});if(a.ok)return a.json();throw new Error("Failed to fetch match data")}},invalidateRoute:t=>{const e=b.buildNext(t),n=b.matchRoutes(e.pathname).map((t=>t.matchId));[...a.currentMatches,...a.pendingMatches??[]].forEach((t=>{n.includes(t.matchId)&&t.invalidate()}))},reload:()=>h({fromCurrent:!0,replace:!0,search:!0}),resolvePath:(t,e)=>_(b.basepath,t,y(e)),matchRoute:(t,e)=>{t={...t,to:t.to?b.resolvePath(t.from??"",t.to):void 0};const n=b.buildNext(t);return null!=e&&e.pending?!!a.pendingLocation&&!!x(b.basepath,a.pendingLocation.pathname,{...e,to:n.pathname}):x(b.basepath,a.currentLocation.pathname,{...e,to:n.pathname})},navigate:async t=>{let{from:e,to:a=".",search:n,hash:r,replace:o,params:s}=t;const i=String(a),c=String(e);let l;try{new URL(`${i}`),l=!0}catch(t){}return f(!l),h({from:c,to:i,search:n,hash:r,replace:o,params:s})},buildLink:t=>{let{from:e,to:n=".",search:r,params:o,hash:s,target:i,replace:c,activeOptions:l,preload:u,preloadMaxAge:d,preloadGcMaxAge:f,preloadDelay:p,disabled:v}=t;try{return new URL(`${n}`),{type:"external",href:n}}catch(t){}const m={from:e,to:n,search:r,params:o,hash:s,replace:c},g=b.buildNext(m);u=u??b.options.defaultPreload;const y=p??b.options.defaultPreloadDelay??0,w=a.currentLocation.pathname===g.pathname,P=a.currentLocation.pathname.split("/"),_=g.pathname.split("/").every(((t,e)=>t===P[e])),L=a.currentLocation.hash===g.hash,M=null!=l&&l.exact?w:_,x=null==l||!l.includeHash||L;return{type:"internal",next:g,handleFocus:t=>{u&&b.preloadRoute(m,{maxAge:d,gcMaxAge:f}).catch((t=>{console.log(t),console.warn("Error preloading route! ☝️")}))},handleClick:t=>{v||function(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}(t)||t.defaultPrevented||i&&"_self"!==i||0!==t.button||(t.preventDefault(),!w||r||s||b.invalidateRoute(m),h(m))},handleEnter:t=>{const e=t.target||{};if(u){if(e.preloadTimeout)return;e.preloadTimeout=setTimeout((()=>{e.preloadTimeout=null,b.preloadRoute(m,{maxAge:d,gcMaxAge:f}).catch((t=>{console.log(t),console.warn("Error preloading route! ☝️")}))}),y)}},handleLeave:t=>{const e=t.target||{};e.preloadTimeout&&(clearTimeout(e.preloadTimeout),e.preloadTimeout=null)},isActive:M&&x,disabled:v}},buildNext:t=>{const e=d(t),a=b.matchRoutes(e.pathname),n=a.map((t=>t.options.preSearchFilters??[])).flat().filter(Boolean),r=a.map((t=>t.options.postSearchFilters??[])).flat().filter(Boolean);return d({...t,__preSearchFilters:n,__postSearchFilters:r})}};return b.update(t),null==b.options.createRouter||b.options.createRouter(b),b},t.decode=I,t.defaultParseSearch=ot,t.defaultStringifySearch=st,t.encode=S,t.functionalUpdate=v,t.interpolatePath=M,t.invariant=f,t.joinPaths=g,t.last=p,t.matchByPath=A,t.matchPathname=x,t.parsePathname=L,t.parseSearchWith=it,t.pick=m,t.resolvePath=_,t.rootRouteId=Y,t.sharedClone=tt,t.stringifySearchWith=ct,t.trimPath=P,t.trimPathLeft=b,t.trimPathRight=w,t.warning=function(t,e){if(t){"undefined"!=typeof console&&console.warn(e);try{throw new Error(e)}catch{}}return!0},Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=index.production.js.map
